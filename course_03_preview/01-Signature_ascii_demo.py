#!/usr/bin/env python3
"""
ç­¾åè¿‡ç¨‹å¯è§†åŒ–æ¼”ç¤º
ç”¨ASCIIè‰ºæœ¯å’ŒåŠ¨ç”»æ•ˆæœå±•ç¤ºç­¾åçš„æ¯ä¸€æ­¥
"""

import time
import hashlib
import secrets

def print_slowly(text: str, delay: float = 0.03):
    """é€å­—æ‰“å°æ–‡æœ¬ï¼Œåˆ›å»ºåŠ¨ç”»æ•ˆæœ"""
    for char in text:
        print(char, end='', flush=True)
        time.sleep(delay)
    print()

def draw_signature_step_by_step():
    """é€æ­¥ç»˜åˆ¶ç­¾åè¿‡ç¨‹"""
    print("ğŸ¬ ç­¾åè¿‡ç¨‹åŠ¨ç”»æ¼”ç¤º")
    print("=" * 50)
    
    print("\nğŸ¯ åœºæ™¯ï¼šAliceè¦ç»™Bobè½¬è´¦")
    time.sleep(1)
    
    # ç¬¬1æ­¥ï¼šå‡†å¤‡æ¶ˆæ¯
    print("\nğŸ“ ç¬¬1æ­¥ï¼šå‡†å¤‡æ¶ˆæ¯")
    message = "è½¬è´¦100 BTCç»™Bob"
    print(f"æ¶ˆæ¯å†…å®¹ï¼š'{message}'")
    
    # ç”»ä¸€ä¸ªæ¶ˆæ¯æ¡†
    print("â”Œ" + "â”€" * 30 + "â”")
    print(f"â”‚ {message:^28} â”‚")
    print("â””" + "â”€" * 30 + "â”˜")
    time.sleep(1)
    
    # ç¬¬2æ­¥ï¼šå“ˆå¸Œæ¶ˆæ¯
    print("\nğŸ”„ ç¬¬2æ­¥ï¼šå¯¹æ¶ˆæ¯è¿›è¡Œå“ˆå¸Œ")
    msg_hash = hashlib.sha256(message.encode()).hexdigest()[:8]
    print(f"æ¶ˆæ¯ â†’ å“ˆå¸Œå‡½æ•° â†’ {msg_hash}")
    
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚  æ¶ˆæ¯   â”‚â”€â”€â”€â–¶â”‚ SHA256  â”‚â”€â”€â”€â–¶â”‚ å“ˆå¸Œå€¼  â”‚")
    print("â”‚ (åŸæ–‡)  â”‚    â”‚ (æ…æ‹Œ)  â”‚    â”‚ (æ‘˜è¦)  â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    time.sleep(1)
    
    # ç¬¬3æ­¥ï¼šä½¿ç”¨ç§é’¥ç­¾å
    print("\nğŸ” ç¬¬3æ­¥ï¼šAliceä½¿ç”¨ç§é’¥ç­¾å")
    alice_private = secrets.randbelow(10000)
    alice_public = alice_private * 7 % 10000
    
    print(f"Aliceçš„ç§é’¥ï¼ˆç§˜å¯†ï¼‰ï¼š{alice_private}")
    print(f"Aliceçš„å…¬é’¥ï¼ˆå…¬å¼€ï¼‰ï¼š{alice_public}")
    
    # ç®€åŒ–çš„ç­¾åè¿‡ç¨‹
    random_k = secrets.randbelow(10000)
    sig_r = (random_k * 7) % 10000
    sig_s = (random_k + alice_private * int(msg_hash, 16)) % 10000
    
    print("\nç­¾åè®¡ç®—è¿‡ç¨‹ï¼š")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ å“ˆå¸Œå€¼  â”‚    â”‚ Alice   â”‚    â”‚  ç­¾å   â”‚")
    print(f"â”‚ {msg_hash} â”‚ ï¼‹ â”‚ ç§é’¥{alice_private:4d} â”‚ ï¼ â”‚({sig_r:4d},{sig_s:4d})â”‚")
    print("â”‚ (æ¶ˆæ¯)  â”‚    â”‚ (èº«ä»½)  â”‚    â”‚ (è¯æ˜)  â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    time.sleep(1)
    
    # ç¬¬4æ­¥ï¼šéªŒè¯ç­¾å
    print("\nâœ… ç¬¬4æ­¥ï¼šä»»ä½•äººéƒ½å¯ä»¥éªŒè¯ç­¾å")
    print("éªŒè¯éœ€è¦ï¼šæ¶ˆæ¯ + Aliceå…¬é’¥ + ç­¾å")
    
    print("éªŒè¯è¿‡ç¨‹ï¼š")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚  æ¶ˆæ¯   â”‚    â”‚ Alice   â”‚    â”‚  ç­¾å   â”‚")
    print(f"â”‚ {message[:8]}..â”‚ ï¼‹ â”‚ å…¬é’¥{alice_public:4d} â”‚ ï¼‹ â”‚({sig_r:4d},{sig_s:4d})â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    print("              â†“")
    print("        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("        â”‚  éªŒè¯ç»“æœ    â”‚")
    print("        â”‚    âœ“ æœ‰æ•ˆ    â”‚")
    print("        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    return alice_private, alice_public, (sig_r, sig_s), msg_hash

def demonstrate_aggregation_visual():
    """å¯è§†åŒ–æ¼”ç¤ºå…¬é’¥èšåˆ"""
    print("\n\nğŸ§ª Schnorrèšåˆé­”æ³•æ¼”ç¤º")
    print("=" * 50)
    
    print("åœºæ™¯ï¼šAliceã€Bobã€Charlieè¦å…±åŒç­¾ç½²ä¸€ä¸ªäº¤æ˜“")
    
    # ä¸‰ä¸ªäººçš„å¯†é’¥
    people = [
        ("Alice", secrets.randbelow(1000), "ğŸ‘©"),
        ("Bob", secrets.randbelow(1000), "ğŸ‘¨"),
        ("Charlie", secrets.randbelow(1000), "ğŸ§‘")
    ]
    
    print("\nğŸ‘¥ å‚ä¸è€…ï¼š")
    for name, private, emoji in people:
        public = private * 7 % 1000
        print(f"{emoji} {name}: ç§é’¥={private:3d}, å…¬é’¥={public:3d}")
    
    time.sleep(1)
    
    # æ˜¾ç¤ºä¼ ç»Ÿæ–¹æ³•
    print("\nğŸ”§ ä¼ ç»Ÿæ–¹æ³• (ECDSA)ï¼š")
    print("æ¯ä¸ªäººç‹¬ç«‹ç­¾åï¼š")
    
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ Alice   â”‚  â”‚  Bob    â”‚  â”‚ Charlie â”‚")
    print("â”‚ ç­¾åA   â”‚  â”‚ ç­¾åB   â”‚  â”‚ ç­¾åC   â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    print("     â†“            â†“            â†“")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚        ä¸‰ä¸ªç‹¬ç«‹çš„ç­¾å                â”‚")
    print("â”‚    A + B + C (ç‰©ç†æ··åˆ)              â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    time.sleep(2)
    
    # æ˜¾ç¤ºSchnorræ–¹æ³•
    print("\nâš¡ Schnorræ–¹æ³•ï¼š")
    print("æ­¥éª¤1ï¼šå…¬é’¥èšåˆ")
    
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    for name, private, emoji in people:
        public = private * 7 % 1000
        print(f"â”‚ {emoji} {public:3d}   â”‚", end="  ")
    print()
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    # è®¡ç®—èšåˆå…¬é’¥
    aggregated_pubkey = sum(private * 7 for _, private, _ in people) % 1000
    
    print("     â†“            â†“            â†“")
    print("          ğŸ§ª æ•°å­¦é­”æ³• ğŸ§ª")
    print("              â†“")
    print("        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print(f"        â”‚ èšåˆå…¬é’¥    â”‚")
    print(f"        â”‚    {aggregated_pubkey:3d}       â”‚")
    print("        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    time.sleep(2)
    
    print("\næ­¥éª¤2ï¼šåä½œç­¾å")
    print("ğŸ¤ ç¬¬ä¸€è½® - æ¯äººç”Ÿæˆæ‰¿è¯ºï¼š")
    
    nonces = []
    commitments = []
    
    for name, private, emoji in people:
        nonce = secrets.randbelow(1000)
        commitment = nonce * 7 % 1000
        nonces.append(nonce)
        commitments.append(commitment)
        print(f"{emoji} {name}: éšæœºæ•°={nonce:3d}, æ‰¿è¯º={commitment:3d}")
    
    R = sum(commitments) % 1000
    print(f"ğŸ”— èšåˆæ‰¿è¯º: {R:3d}")
    
    time.sleep(1)
    
    print("\nâœï¸ ç¬¬äºŒè½® - ç”Ÿæˆæœ€ç»ˆç­¾åï¼š")
    message = "å…±åŒè½¬è´¦1000 BTC"
    challenge = int(hashlib.sha256(f"{R}{aggregated_pubkey}{message}".encode()).hexdigest(), 16) % 1000
    
    signature_parts = []
    for i, (name, private, emoji) in enumerate(people):
        s_part = (nonces[i] + challenge * private) % 1000
        signature_parts.append(s_part)
        print(f"{emoji} {name}: ç­¾åéƒ¨åˆ†={s_part:3d}")
    
    final_s = sum(signature_parts) % 1000
    
    print("\nğŸ§ª åŒ–å­¦ååº”è¿‡ç¨‹ï¼š")
    print("â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”")
    print("â”‚ s1  â”‚ +â”‚ s2  â”‚ +â”‚ s3  â”‚ = èåˆ")
    print(f"â”‚{signature_parts[0]:3d} â”‚  â”‚{signature_parts[1]:3d} â”‚  â”‚{signature_parts[2]:3d} â”‚")
    print("â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜")
    print("            â†“")
    print("     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("     â”‚  æœ€ç»ˆç­¾å    â”‚")
    print(f"     â”‚ ({R:3d}, {final_s:3d}) â”‚")
    print("     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    time.sleep(1)
    
    print(f"\nğŸ“Š ç¥å¥‡çš„å¯¹æ¯”ï¼š")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚   ECDSAä¼ ç»Ÿ    â”‚   Schnorrèšåˆ    â”‚")
    print("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤")
    print("â”‚ 3ä¸ªç‹¬ç«‹ç­¾å    â”‚ 1ä¸ªèšåˆç­¾å      â”‚")
    print("â”‚ æ¯ä¸ªéƒ½å¯è§     â”‚ èåˆä¸å¯åˆ†       â”‚")
    print("â”‚ æ˜æ˜¾å¤šäººå‚ä¸   â”‚ çœ‹ä¼¼å•äººç­¾å     â”‚")
    print("â”‚ æ•°æ®é‡å¤§       â”‚ æ•°æ®é‡å°         â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")

def show_privacy_magic():
    """å±•ç¤ºéšç§é­”æ³•"""
    print("\n\nğŸ­ éšç§é­”æ³•æ¼”ç¤º")
    print("=" * 50)
    
    print("è®©æˆ‘ä»¬çœ‹çœ‹å¤–äººçœ¼ä¸­çš„åŒºåˆ«ï¼š")
    time.sleep(1)
    
    print("\nğŸ‘€ åŒºå—é“¾è§‚å¯Ÿè€…çœ‹åˆ°çš„ï¼š")
    
    # æ¨¡æ‹Ÿå•ç­¾äº¤æ˜“
    single_sig = secrets.randbelow(10000)
    print(f"äº¤æ˜“A: ç­¾å = {single_sig:4d}")
    print("       çœ‹èµ·æ¥åƒï¼šğŸ‘¤ (å•ä¸ªäºº)")
    
    # æ¨¡æ‹ŸSchnorrèšåˆç­¾å
    aggregated_sig = secrets.randbelow(10000)
    print(f"äº¤æ˜“B: ç­¾å = {aggregated_sig:4d}")
    print("       çœ‹èµ·æ¥åƒï¼šğŸ‘¤ (å•ä¸ªäºº)")
    
    time.sleep(1)
    
    print("\nğŸ¤” è§‚å¯Ÿè€…çš„å›°æƒ‘ï¼š")
    print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("â”‚ è¿™ä¸¤ä¸ªäº¤æ˜“çœ‹èµ·æ¥å®Œå…¨ä¸€æ ·ï¼          â”‚")
    print("â”‚ æ— æ³•åˆ†è¾¨å“ªä¸ªæ˜¯å•ç­¾ï¼Œå“ªä¸ªæ˜¯å¤šç­¾      â”‚")
    print("â”‚ è¿™å°±æ˜¯Schnorrçš„éšç§é­”æ³•            â”‚")
    print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    
    print("\nğŸ¯ å®é™…æƒ…å†µï¼š")
    print("äº¤æ˜“A: çœŸçš„æ˜¯1ä¸ªäººç­¾å ğŸ‘¤")
    print("äº¤æ˜“B: å®é™…æ˜¯3ä¸ªäººèšåˆç­¾å ğŸ‘¥ğŸ‘¥ğŸ‘¥")
    print("       ä½†å¤–è¡¨çœ‹èµ·æ¥å®Œå…¨ç›¸åŒï¼")

def explain_why_aggregation_works():
    """è§£é‡Šä¸ºä»€ä¹ˆèšåˆèƒ½å·¥ä½œ"""
    print("\n\nğŸ”¬ æ·±å±‚åŸç†ï¼šä¸ºä»€ä¹ˆèšåˆç­¾åèƒ½å·¥ä½œï¼Ÿ")
    print("=" * 50)
    
    print("è®©æˆ‘ç”¨ç®€å•æ•°å­¦æ¥è§£é‡Šï¼š")
    time.sleep(1)
    
    print("\nğŸ“ æ•°å­¦åŸºç¡€ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š")
    print("å‡è®¾æˆ‘ä»¬æœ‰3ä¸ªäººï¼š")
    
    # ç®€å•çš„æ•°å­¦ç¤ºä¾‹
    a, b, c = 5, 7, 3  # ç§é’¥
    print(f"Aliceç§é’¥: a = {a}")
    print(f"Bobç§é’¥:   b = {b}")
    print(f"Charlieç§é’¥: c = {c}")
    
    print(f"\nå¯¹åº”çš„å…¬é’¥ï¼ˆç§é’¥ Ã— åŸºç‚¹Gï¼‰ï¼š")
    print(f"Aliceå…¬é’¥: A = {a} Ã— G")
    print(f"Bobå…¬é’¥:   B = {b} Ã— G")  
    print(f"Charlieå…¬é’¥: C = {c} Ã— G")
    
    print(f"\nğŸ”— èšåˆå…¬é’¥ï¼š")
    print(f"èšåˆå…¬é’¥ = A + B + C")
    print(f"         = {a}Ã—G + {b}Ã—G + {c}Ã—G")
    print(f"         = ({a}+{b}+{c}) Ã— G")
    print(f"         = {a+b+c} Ã— G")
    
    print(f"\nâœï¸ èšåˆç­¾åï¼š")
    print(f"æ¯ä¸ªäººè®¡ç®—: si = ri + challenge Ã— ç§é’¥i")
    print(f"Alice: s1 = r1 + eÃ—{a}")
    print(f"Bob:   s2 = r2 + eÃ—{b}")
    print(f"Charlie: s3 = r3 + eÃ—{c}")
    
    print(f"\nğŸ§® èšåˆè¿‡ç¨‹ï¼š")
    print(f"s_total = s1 + s2 + s3")
    print(f"        = (r1 + eÃ—{a}) + (r2 + eÃ—{b}) + (r3 + eÃ—{c})")
    print(f"        = (r1+r2+r3) + eÃ—({a}+{b}+{c})")
    print(f"        = R_total + e Ã— èšåˆç§é’¥")
    
    print(f"\nâœ… éªŒè¯åŸç†ï¼š")
    print(f"éªŒè¯è€…æ£€æŸ¥: s_total Ã— G = R_total + e Ã— èšåˆå…¬é’¥")
    print(f"è¿™ä¸ªç­‰å¼æˆç«‹ï¼Œè¯´æ˜ç­¾åæœ‰æ•ˆï¼")
    
    time.sleep(2)
    
    print(f"\nğŸ’¡ å…³é”®æ´å¯Ÿï¼š")
    print("1. æ¤­åœ†æ›²çº¿çš„çº¿æ€§æ€§è´¨ä½¿èšåˆæˆä¸ºå¯èƒ½")
    print("2. (a+b+c)Ã—G = aÃ—G + bÃ—G + cÃ—G")
    print("3. èšåˆåçš„ç­¾ååœ¨æ•°å­¦ä¸Šç­‰ä»·äºå•ä¸ªç­¾å")
    print("4. è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤–äººæ— æ³•åŒºåˆ†å•ç­¾å’Œå¤šç­¾")

def demonstrate_real_world_analogy():
    """ç°å®ä¸–ç•Œç±»æ¯”"""
    print("\n\nğŸŒ ç°å®ä¸–ç•Œç±»æ¯”")
    print("=" * 50)
    
    print("è®©æˆ‘ç”¨å‡ ä¸ªç”Ÿæ´»ä¾‹å­æ¥è§£é‡Šï¼š")
    time.sleep(1)
    
    print("\nğŸ¨ ä¾‹å­1ï¼šè°ƒè‰²ç›˜")
    print("ECDSA (ç‰©ç†æ··åˆ):")
    print("  ğŸ”´ çº¢è‰²é¢œæ–™ + ğŸ”µ è“è‰²é¢œæ–™ + ğŸŸ¡ é»„è‰²é¢œæ–™")
    print("  = ğŸ¨ æ··åˆé¢œæ–™ï¼ˆä»èƒ½åˆ†ç¦»å‡ºåŸè‰²ï¼‰")
    
    print("\nSchnorr (åŒ–å­¦ååº”):")
    print("  ğŸ”´ çº¢å…ƒç´  + ğŸ”µ è“å…ƒç´  + ğŸŸ¡ é»„å…ƒç´ ")
    print("  = ğŸŸ£ æ–°åŒ–åˆç‰©ï¼ˆæ— æ³•é€†è½¬åˆ†ç¦»ï¼‰")
    
    time.sleep(2)
    
    print("\nğŸ² ä¾‹å­2ï¼šåšèœ")
    print("ECDSA:")
    print("  ğŸ¥• èƒ¡èåœ + ğŸ¥” åœŸè±† + ğŸ¥© ç‰›è‚‰")
    print("  = ğŸ² ç‚–èœï¼ˆä»èƒ½æŒ‘å‡ºæ¯ç§é£Ÿæï¼‰")
    
    print("\nSchnorr:")
    print("  ğŸŒ¾ é¢ç²‰ + ğŸ¥š é¸¡è›‹ + ğŸ¥› ç‰›å¥¶")
    print("  = ğŸ° è›‹ç³•ï¼ˆæ— æ³•åˆ†ç¦»å‡ºåŸæ–™ï¼‰")
    
    time.sleep(2)
    
    print("\nğŸµ ä¾‹å­3ï¼šéŸ³ä¹")
    print("ECDSA:")
    print("  ğŸ¸ å‰ä»–å£° + ğŸ¥ é¼“å£° + ğŸ¤ äººå£°")
    print("  = ğŸµ æ··éŸ³ï¼ˆå¯ä»¥è°ƒèŠ‚å„è½¨éŸ³é‡ï¼‰")
    
    print("\nSchnorr:")
    print("  ğŸ¼ ä¸‰ä¸ªéŸ³ç¬¦")
    print("  = ğŸ¶ å’Œå¼¦ï¼ˆäº§ç”Ÿå…¨æ–°çš„å’Œå£°æ•ˆæœï¼‰")

def interactive_quiz():
    """äº’åŠ¨æµ‹éªŒ"""
    print("\n\nğŸ¯ ç†è§£æµ‹éªŒ")
    print("=" * 50)
    
    questions = [
        {
            "question": "å¦‚æœæœ‰5ä¸ªäººç”¨Schnorrèšåˆç­¾åï¼Œå¤–äººèƒ½çœ‹å‡ºæœ‰å‡ ä¸ªäººå‚ä¸å—ï¼Ÿ",
            "options": ["A. èƒ½çœ‹å‡º5ä¸ªäºº", "B. çœ‹èµ·æ¥åƒ1ä¸ªäºº", "C. çœ‹èµ·æ¥åƒ2-3ä¸ªäºº"],
            "answer": "B",
            "explanation": "è¿™å°±æ˜¯Schnorrçš„é­”æ³•ï¼æ— è®ºå¤šå°‘äººå‚ä¸ï¼Œèšåˆç­¾åçœ‹èµ·æ¥éƒ½åƒå•ä¸ªäººçš„ç­¾åã€‚"
        },
        {
            "question": "ECDSAå¤šé‡ç­¾åæœ€åƒä»€ä¹ˆï¼Ÿ",
            "options": ["A. åŒ–å­¦ååº”", "B. ç‰©ç†æ··åˆ", "C. æ ¸èšå˜"],
            "answer": "B", 
            "explanation": "ECDSAå°±åƒç‰©ç†æ··åˆï¼Œæ¯ä¸ªç»„åˆ†ï¼ˆç­¾åï¼‰éƒ½ä¿æŒç‹¬ç«‹ï¼Œå¯ä»¥åˆ†åˆ«è¯†åˆ«ã€‚"
        },
        {
            "question": "Schnorrèšåˆçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ",
            "options": ["A. æ›´å¿«çš„é€Ÿåº¦", "B. éšç§ä¿æŠ¤", "C. æ›´ç®€å•çš„ä»£ç "],
            "answer": "B",
            "explanation": "æœ€å¤§ä¼˜åŠ¿æ˜¯éšç§ä¿æŠ¤ï¼šæ— æ³•åŒºåˆ†å•ç­¾å’Œå¤šç­¾ï¼Œæä¾›äº†å®Œç¾çš„éšç§æ€§ã€‚"
        }
    ]
    
    score = 0
    for i, q in enumerate(questions):
        print(f"\né—®é¢˜ {i+1}: {q['question']}")
        for option in q['options']:
            print(f"  {option}")
        
        print(f"\nğŸ’¡ ç­”æ¡ˆ: {q['answer']}")
        print(f"è§£é‡Š: {q['explanation']}")
        time.sleep(2)

if __name__ == "__main__":
    print("ğŸ¬ ç­¾åæŠ€æœ¯å¯è§†åŒ–æ•™å­¦")
    print("è®©å¤æ‚æ¦‚å¿µå˜å¾—ç®€å•æ˜“æ‡‚")
    
    # é€æ­¥æ¼”ç¤ºåŸºç¡€ç­¾å
    alice_private, alice_public, signature, msg_hash = draw_signature_step_by_step()
    
    # æ¼”ç¤ºèšåˆè¿‡ç¨‹
    demonstrate_aggregation_visual()
    
    # å±•ç¤ºéšç§ç‰¹æ€§
    show_privacy_magic()
    
    # è§£é‡Šæ·±å±‚åŸç†
    explain_why_aggregation_works()
    
    # ç°å®ä¸–ç•Œç±»æ¯”
    demonstrate_real_world_analogy()
    
    # äº’åŠ¨æµ‹éªŒ
    interactive_quiz()
    
    print(f"\nğŸ“ è¯¾ç¨‹æ€»ç»“")
    print("=" * 50)
    print("ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µï¼š")
    print("1. æ•°å­—ç­¾å = ç§é’¥å¯¹æ¶ˆæ¯çš„æ•°å­¦æŒ‡çº¹")
    print("2. ECDSA = ç‰©ç†æ··åˆï¼Œæ¯ä¸ªç­¾åç‹¬ç«‹å­˜åœ¨")
    print("3. Schnorr = åŒ–å­¦ååº”ï¼Œå¤šä¸ªç­¾åèåˆä¸ºä¸€")
    print("4. å…¬é’¥èšåˆ = å¤šä¸ªèº«ä»½åˆå¹¶æˆä¸€ä¸ªè”åˆèº«ä»½")
    print("5. éšç§é­”æ³• = å¤–äººæ— æ³•åŒºåˆ†å•ç­¾å’Œå¤šç­¾")
    print("6. è¿™äº›ç‰¹æ€§æ˜¯Taprooté©å‘½æ€§æ”¹è¿›çš„åŸºç¡€ï¼")
    
    print(f"\nğŸš€ ä¸‹ä¸€æ­¥ï¼š")
    print("ç°åœ¨æ‚¨å·²ç»ç†è§£äº†Schnorrèšåˆç­¾åçš„æ ¸å¿ƒåŸç†ï¼Œ")
    print("æ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ Taprootå¦‚ä½•åˆ©ç”¨è¿™äº›ç‰¹æ€§")
    print("å®ç°æ›´å¼ºå¤§çš„æ¯”ç‰¹å¸æ™ºèƒ½åˆçº¦åŠŸèƒ½ï¼")