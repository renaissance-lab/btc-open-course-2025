# 观察legacy、segwit和taproot 地址的⻓短，说说他们有什么区别

* legacy地址: 形如：**mtJ6pfxrQxd5okuhoFuehFfgeFgscS1ECM**，测试网以‘m’开头 主网以数字 1 开头，共有34个字符长度。这类地址基于 Pay-to-Public-Key-Hash（P2PKH）脚本
* SegWit 地址: 形如 **tb1q3s443tehh8y4uknqpu8uurrued7fckx8al622v**  是一种以 bc1q 开头，采用 Bech32 编码方案的比特币地址,基于P2WPKH 脚本。共有42~46 个字符长度
* Taproot 地址: 形如：**tb1pjsksth44c0ur5089zuc4ldw082d42u24zr8n6lyarr7hk7v6l99s3dxufw** 是一种以 bc1p开头，采用 Bech32m 编码方案的比特币地址类型，也是目前最新的比特币地址类型，基于P2TR 脚本，共有58~62 个字符长度


# 观察legacy、segwit和taproot 锁定脚本（scriptpubkey)的⻓短，说说他们有什么区别

#### * legacy地址:

  P2PKH脚本 :  P2PKH 脚本模式包含一个公钥哈希
  
  
  _****OP_DUP
  OP_HASH160   
  OP_PUSHBYTES_20   
   55ae51684c43435da751ac8d2173b2652eb64105  
  OP_EQUALVERIFY   
   OP_CHECKSIG_****  


#### * SegWit 地址:   
  P2WPKH脚本 :  是一种将输出锁定到公钥哈希的脚本模式。 它的工作方式与传统的P2PKH相同，但它通过Witness字段而不是ScriptSig解锁。 与 P2PKH 相比，使用 P2WPKH 的好处是，Witness 字段数据的权重小于ScriptSig 字段数据，因此当您解锁 P2WPKH 时，您支付的交易费用会略少一些。
 
**_OP_0  
 OP_PUSHBYTES_20  
 841b80d2cc75f5345c482af96294d04fdd66b2b7  **_

#### * Taproot 地址:

P2TR脚本 : 是一种将输出锁定到公钥的锁定脚本和多个可选的自定义锁定脚本*。
**_OP_1 
OP_PUSHBYTES_32 
0f0c8db753acbd17343a39c2f3f4e35e4be6da749f9e35137ab220e7b238a667_**


# 动⼿编写：segwit到legacy地址的代码；taproot到segwit、legacy地址的代码

详见 **03，04，05** 代码


# 动⼿编写：加难度，构建⼀个交易，输⼊是三种地址（legacy、segwit、taproot），分别取其UTXO，然后⽀付给⼀个地址，预估⼿续费，并把 输⼊⾦额-⼿续费 作为需要⽀付出去的⾦额。注意签名的⽅法。
详见 **06** 代码
